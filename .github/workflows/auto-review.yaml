name: Auto Review
on:  
  pull_request:
    paths:
      - 'scripts/**'
      - 'internal/**'
      - 'cmd/**'
      - 'build/**'
      - '.github/workflows/auto-review.yaml'
      - '.env'
      - docker-compose.yml
      - Makefile
      - '!**.md'
      - '!build/ci/jenkins/**'
      # FIXME(wxyu): not need to run code check, update the ci-passed rules and remove these two lines
      - go.mod
      - go.sum 
jobs:
  staticcheck:
    name: staticcheck
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo ${{ secrets.REVIEW_TOKEN }}
      # checkout code
      - uses: actions/checkout@v3
      # If you want to use the specific version of Go,
      # you need actions/setup-go@v3 action.
      - uses: actions/setup-go@v3
        with:
          go-version: '~1.18.1'
      # run staticcheck
      - uses: reviewdog/action-staticcheck@v1.7.0
        with:
          # Change reviewdog reporter if you need [github-pr-check,github-check,github-pr-review].
          github_token: ${{ secrets.REVIEW_TOKEN }}
          reporter: github-pr-review